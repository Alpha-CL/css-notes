# Transform of CSS3

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


    + -------- wrapper ------------------------------------- +
    |                                                        |             
    |                                                        |             
    |                         |          /                   |  
    |                         |         /                    |        * 注意 x,y,z 轴所对应的方向
    |                         |        /                     |  
    |                         |       /                      |
    |                         |      /                       |
    |                         |     /                        |
    |                         |    /                         |
    |                         |   /                          |
    |                         |  /                           |
    |                         | /                            |
    |                  origin |/                             |
    |   --------------------- + ------------------------>    |
    |                        /|                    x-axis    |
    |                       / |                              |
    |                      /  |                              |
    |                     /   |                              |
    |                    /    |                              |
    |                   /     |                              |
    |                  /      |                              |
    |                 /       |                              |
    |                /        |                              |
    |               /         |                              |
    |     z-axis  |/          |/  y-axis                     |
    |                                                        |            
    |                                                        |            
    + ------------------------------------------------------ +



    wrapper {
    
        perspective: ;                                      // 设置景深
        
        perspective-origin: ;                               // 设置 2D旋转中心  3D旋转轴 
        
        transform-style: preseerve-3d;                      // 设置浏览器以 3D 渲染效果
        
        transform: {
        
            backface-visibility();                          // 设置子项 旋转后，是否显示背面
        }
    }
    
    item {
    
        transform: {
        
            perspective();                                  // 设置所有子项 景深为同一值
            
            rotate();                                       // 设置 根绝坐标轴旋转
            
            scale()                                         // 设置 坐标轴刻度 倍数，持续影响后续操作
            
            skew();                                         // 偏移并改变设置的坐标轴，另一个坐标轴随之拉伸
            
            translate();                                    // 基于子项当前位置偏移
        }
    }


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


#### 3D view

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * person.eye => perspective-origin
 * 
 * 
 * 
 * 景深 => ( person <--> target ).size                // 人眼( person eye ) 到 物体( target ) 之间的距离    
 * 
 * 景象 => ( (person <--> target) => projection )     // 人眼 到 物体 所产生的 视觉放射线 和 屏交叉 时留下的 投影
 *                                                       
 *                                                      1) 当 '景深 > 0' 时，所产生的交叉景象 随着景深减小而增大
 * 
 *                                                      2) 当 '景深 < 0' 时，所产生的交叉景象 随着景深增大而减小
 */


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//



      // 当 '景深 > 0' 时，所产生的交叉景象 随着景深减小而增大


                                                     Screen       
                                                +            
                                                |              
                                                |  projection            
                            target              |        
                                                |   +    
      person.eye            +                   |   |\   
                            |\                  |   | \      
        @?@                 | \                 |   |  \        +
        /|\                 |  +                |   |   \       |
        / \                 |  |                |   |    \      |
                            +  |                |   +     \     |
                             \ |                |    \     +    |
                              \|                |     \    |    |           * 调整 perspective & translateZ()
                               +                +      \   |    |
                                                        \  |    |             都会影响 '最终所产生的交叉影像'
         + - - - - - - - perspective - - - - - - - - - + \ |    |         
                                                          \|    |         
                                                           +    |         
                                                                |     
                                                                |
                                                       |        |
                                                       |        |
                                                       |        +
                                                   \   |       
                                                    \  |       
                                                     \ |       
                                                      \| axis
                             <------------------------ + ----------------------
                               z                       |\
                                                       | \
                             <--                       |  \                 -->
                             translateZ( num++ );      |   \                translateZ( num-- );
                                                       |    \
                                                       |     \| x
                                                       |
                                                       |/ y 


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


      // 当 '景深 < 0' 时，所产生的交叉景象 随着景深增大而减小


                                                     Screen       
                                                +            
                                                |              
                                                |                               target
                                                |  projection                   
                                                |                               +      
      person.eye                                |     +                         |\     
                                                |     |\                        | \       
        @?@                                     |     | \       +               |  \      
        /|\                                     |     |  +      |               |   \     
        / \                                     |     |  |      |               |    \    
                                                |     +  |      |               +     \   
                                                |      \ |      |                \     +  
                                                |       \|      |                 \    |  
                                                +        +      |                  \   |  
                                                                |                   \  |  
         + - - - - - - - perspective - - - - - - - - - +        |                    \ |
                                                                |                     \|
                                                                |                      +
                                                                |     
                                                                |
                                                       |        |
                                                       |        |
                                                       |        +
                                                   \   |       
                                                    \  |       
                                                     \ |       
                                                      \| axis
                             <------------------------ + ----------------------
                               z                       |\
                                                       | \
                             <--                       |  \                 -->
                             translateX( num++ );      |   \                translateX( num-- );
                                                       |    \
                                                       |     \| x
                                                       |
                                                       |/ y 


//-------------------------------------------------------------------------------------------------------------------//


/**
 * perspective: length | none | initial | inherit;           // 需定义在包裹 3D 元素的父级
 * 
 * 用于得到3D定位的元素一些透视
 * 
 * 定义的对象是从用户有多远。因此，较低的值将导致比更高的价值更强烈的3D效果
 * 
 * 
 * @length: 元素与视图之间的距离
 * 
 */


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


/**
 * transform: perspective();                                 // 需定义在包裹 3D 元素的本身
 *      
 * 书写在 transform 开始( 部分浏览器不支持 )
 * 
 * 设置所有子元素 景深一致
 */


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


/**
 * perspective-origin: x-axis y-axis | initial | inherit;    // 需定义在包裹 3D 元素的父级    // 基于当前设置元素的位置定位
 * 
 * 定义在从该位置在用户正在观看的 3D定位的元素
 * 
 * 
 * @x-axis: 50%( default )              // center
 *          possible values( left | center | right | length | % )
 * 
 * 
 * @y-axis: 50%( default )              // center 
 *          possible values( left | center | right | length | % )
 */


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


/**
 * transform-style: flat( default ) | preseerve-3d | initial | inherit;
 * 
 * 指定元素如何嵌套呈现在 3D空间 中                           // 若不设置，浏览器依然按照 2D 渲染( 不会展示 3D 对叠层 )
 * 
 * 
 * @flat: 指定子元素将不保留其3D位置。这是默认值
 * 
 * @preseerve-3d: 指定子元素将保留其3D位置
 */


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


/**
 * transform: backface-visibility( hidden | );                        // 需定义在 3D 子项本身
 * 
 * 设置在 3D 视图中，旋转后是否可以看到 子项的 背面 
 */


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


#### transform: rotate();

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * angle                    // 角
 * 
 * 
 * deg                      // Degrees 度
 * 
 * grad                     // Gradians 梯度                  // 90deg = 100grad = 0.25turn ~= 1.5707963...rad
 * 
 * rad                      // Radians 弧度                   // 90deg = 100grad = 0.25turn ~= 1.5707963...rad
 * 
 * turn                     // Turns 圈                       // 100grad = 0.25turn ~= 1.5707963...rad
 * 
 */


//-------------------------------------------------------------------------------------------------------------------//



/**
 * transfrom: none | transform-functions | initial | inherit;
 * 
 * 
 */


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * transform-origin: x y;       // 偏移 2D坐标轴         // 定位元素中心，影响 旋转 等
 * 
 * transform-origin: x y z;     // 偏移 3D坐标轴         // 定位 3D 坐标轴新位置，影响后续操作          
 * 
 * 基于当前元素设置
 */

transform-origin: 0 0;
transform-origin: center center;
transform-origin: 20% 20%;


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * rotate(num deg);           // 2D
 * 
 * 根据设定 角度( num deg ) 顺时针 或 逆时针 2D旋转指定元素
 */


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


// 元素旋转后，元素所对应的坐标轴也会随之旋转

/**
 * rotateX();               // 3D  
 * rotateY();               // 3D  
 * rotateZ();               // 3D  
 * 
 * 指定跟随 (x | y | z )-axis 旋转指定角度，
 * 
 * 旋转轴 跟随指定旋转所偏移
 */


/**
 * rotate3d( x-axis y-axis z-axis angle );
 * 
 * 设置 transform-origin( 中心点 ) 至 ( x-axis y-axis z-axis ) 的射线为指定旋转轴，并根据指定 angle 旋转指定角度
 * 
 * 旋转轴 跟随指定旋转所偏移
 */


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//

 
// 3D 旋转的顺序不同，旋转轴也不同

demoOrigin -> transform: rotateX(-45deg) rotateY(90deg);               // stateA

demoOrigin -> transform: rotateY(-90deg) rotateX(45deg);               // stateB

=> stateA != stateB         // 并未回掉原来位置( 因坐标轴跟随物体运动 )


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


#### transform: scale();

> 伸缩的是当前元素变化坐标轴的刻度( 当改变任意坐标轴刻度标准后，再次计算会以 '当前坐标轴的刻度标准( 被改变后的坐标刻度标准 )' 再次进行计算 )
>
> 叠加操作，并非覆盖操作( 元素设置多个 scale()时，后设置的并不会覆盖之前设置的，而是在上一个设置的基础上继续设置 scale()属性 )
> 
> 先 scale() 后的元素，无论后续如何改变( eg: rotate(); ) 当前元素，之前所设置的 scale() 会一直持续影响下去

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * scale( scaleX, scaleY );                         // 2D
 * 
 * 
 * @scaleX: 缩放当前元素的 X轴刻度( 1 = 100％，0.5 = 50％，2 = 200％ 等 )的倍数;
 * 
 * @scaleY: 缩放当前元素 Y轴刻度( 1 = 100％，0.5 = 50％，2 = 200％ 等 )的倍数;
 */


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * cale3d( scaleX, scaleY, scaleZ );                // 3D
 * 
 * @scaleX: 缩放当前元素的 X轴刻度( 1 = 100％，0.5 = 50％，2 = 200％ 等 )的倍数;
 * 
 * @scaleY: 缩放当前元素 Y轴刻度( 1 = 100％，0.5 = 50％，2 = 200％ 等 )的倍数;
 * 
 * @scaleZ: 缩放当前元素 Z轴刻度( 1 = 100％，0.5 = 50％，2 = 200％ 等 )的倍数;
 */


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * scaleX();
 * 
 * 缩放当前元素的 X轴刻度( 1 = 100％，0.5 = 50％，2 = 200％ 等 )的倍数;
 */


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


/**
 * scaleY();
 * 
 * 缩放当前元素 Y轴刻度( 1 = 100％，0.5 = 50％，2 = 200％ 等 )的倍数;
 */


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


/**
 * scaleZ();
 * 
 * 缩放当前元素 Z轴刻度( 1 = 100％，0.5 = 50％，2 = 200％ 等 )的倍数;
 */


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


#### transform: skew();

> 设置 skew() 偏移了坐标轴，并且坐标轴刻度也被拉伸了，偏移后的坐标轴会影响后续操作
>
> 效果类似: 斜切

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * skew( skewX, skewY );                     // 2D
 * 
 * 
 * @skewX: 沿倾斜后的 X坐标轴 进行偏移，并拉伸另一坐标轴刻度
 * 
 * @skewY: 沿倾斜后的 Y坐标轴 进行偏移，并拉伸另一坐标轴刻度
 * 
 */


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


/**
 * skewX();                     // 2D
 * 
 * 沿倾斜后的 X坐标轴 进行偏移，并拉伸另一坐标轴刻度
 */


/**
 * skewY();                     // 2D
 * 
 * 沿倾斜后的 Y坐标轴 进行偏移，并拉伸另一坐标轴刻度
 */


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


#### transform: translate();

> 仅基于自身当前位置所偏移位置                          // 不受 transform-origin 影响
> 
> translate()偏移后，对后续操作有影响                   // 坐标轴跟随偏移移动
>  
> 解决子项未知大小挪动的问题


``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * translate(x, y);                      // 2D
 * 
 * 设置当前元素基于元素当前位置的坐标偏移量
 */


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * translate3d(x, y, z);                // 3D
 * 
 * 设置当前元素基于元素当前位置的坐标偏移量
 */


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * translateX();
 * 
 * 设置当前元素基于元素当前位置的 X坐标 偏移量
 */


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * translateY();
 * 
 * 设置当前元素基于元素当前位置的 Y坐标 偏移量
 */


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * translateZ();
 * 
 * 设置当前元素基于元素当前位置的 Z坐标 偏移量
 */


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


#### transform: matrix();

> 矩阵( 线性代数的中的一种数据形式 ) => 计算机图形学的基础
> 
> 矩阵是 transform 中底层的计算规则

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 矩阵乘法             
 * 
 * 必须满足: matrix.item[1].col.length == matrix.item[2].row.length     // 第一个矩阵列数 等于 第二个矩阵的行数
 * 
 *          matrix.item[2].col.length == result.col.length             // 第二个矩阵的列数 决定结果的 列数
 * 
 * result => matrix.item[1].allRow * matrix.item[2].col
 */

// matrix 中填入规则是 上下 上下 填入矩阵 中的数据规则

 item[1]        item[2]          result
+ ----- +       + - +       + ----------- +

// 2D

| example
|
|
| a b e |       | x |       | zx + cy + e |
| b d f |   *   | y |   =   | bx + dy + f |
| 0 0 1 |       | 1 |       | 0  + 0  + 1 |


| translate(x + e y + f)
|
|
| 若只关注 col1 & col2，并且 { e, f } 为变量，{ x, y } 为 item 的每个坐标点
|                                                     
| item[1].row[1] = const row[1] = 1 const row[2] = 0 let row[3] = e,                                                
|                  const row[1] = 0 const row[2] = 1 let row[3] = f;                                 
|                                                    
| item[2].col[1] = let col1 = x,                                                   
|                  let col1 = y;                                         
|                                                    
| matrix(1, 0, 0, 1, e, f); === translate(x, y);                                                   
|                                                    
| 1 0 e |       | x |       | x + e |
| 0 1 f |   *   | y |   =   | y + f |        
| 0 0 1 |       | 1 |       | 1     |


| scale(ax dy);
|
| matrix(a, 0, 0, d, 0, 0) === scale(x y)
|
| a 0 0 |       | x |       | ax |
| 0 d 0 |   *   | y |   =   | dy |        
| 0 0 1 |       | 1 |       | 1  |


| ratate(ø);
|
| matrix(cos(ø)), sin(ø), -sin(ø), cos(ø), 0, 0) === rotate(ø)
|
| cos(ø), -sin(ø), e |     | x |       | cos(ø)x + -sin(ø)y + e |
| sin(ø), cos(ø) , f |  *  | y |   =   | sin(ø)x + cos(ø)y  + f |
| 0     , 0      , 1 |     | 1 |       | 1                      |
| 
| x1 = cos(ø)x - sin(ø)y + 0;
| y2 = sin(ø)x + cos(ø)y + 0;


// 3d

| 
| matrix(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, y, z, 1);               // 缩放
| 
| matrix(x, 0, 0, 0, 0, y, 0, 0, 0, 0, z, 0, 0, 0, 0, 1);               // 平移


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


#### cubic-bezier

> 三次( 2 次控制点 ) / 两次( 1 次控制点 ) / n( n - 1 次控制点 ) 贝塞尔曲线
> 
> 可以直接在浏览器中直观的调整自己想要的曲线

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


    /**
     * traget 的斜率 等于 两个无限接近 target 的两个点的连线的 斜率
     * 
     * 
     * +k           // 加速
     * 
     * -k           // 减速
     * 
     */
                                                         
                                                         
                     y(s) |\                             
                          |         /                    
                          |        /                     
                          |       + (x₁, y₁)                      
                          |      /                                          y₁ - y₂
                          |     + target                 target.k = f'(x) = --------    
                          |    /                                            x₁ - x₂
                          |   + (x₂, y₂)                         
                          |  /                           
                          | /                            
                          |/                             
    --------------------- + ------------------------>    
                         /| 0                    x(t)    
                        / |                              
                       /  |                              
                      /   |                              
                     /    |                              
                    /     |                              
                   /      |                              
                  /       |                              
                 /        |                              
                /         |                              
                          |                     
                                                  
                                                  
    /**
     * cubic-bezier(x₁ y₁ x₂ y₂)
     * 
     * B(t) = P₀(1 - t)³ + 3P₁t(1 - t)² + 3P₂t²(1 - t) + P₃t³ ,t ∈ [0,1]
     * 
     * P₁           // 和起点重合的控制点
     * P₂           // 和终点重合的控制点
     * 
     * P₀           // 起点
     * P₃           // 终点
     * 
     */                                             
    

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```